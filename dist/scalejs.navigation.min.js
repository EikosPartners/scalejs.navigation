!function(a){function b(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function c(a,b){if("function"!=typeof a)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function d(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){d.prototype.dispatch.apply(a,arguments)}}b.prototype={active:!0,params:null,execute:function(a){var b,c;return this.active&&this._listener&&(c=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,c),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},d.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,c,d,e){var f,g=this._indexOfListener(a,d);if(-1!==g){if(f=this._bindings[g],f.isOnce()!==c)throw new Error("You cannot add"+(c?"":"Once")+"() then add"+(c?"Once":"")+"() the same listener without removing the relationship first.")}else f=new b(this,a,c,d,e),this._addBinding(f);return this.memorize&&this._prevParams&&f.execute(this._prevParams),f},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,d){return c(a,"add"),this._registerListener(a,!1,b,d)},addOnce:function(a,b,d){return c(a,"addOnce"),this._registerListener(a,!0,b,d)},remove:function(a,b){c(a,"remove");var d=this._indexOfListener(a,b);return-1!==d&&(this._bindings[d]._destroy(),this._bindings.splice(d,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b,c=Array.prototype.slice.call(arguments),d=this._bindings.length;if(this.memorize&&(this._prevParams=c),d){b=this._bindings.slice(),this._shouldPropagate=!0;do d--;while(b[d]&&this._shouldPropagate&&b[d].execute(c)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var e=d;e.Signal=d,"function"==typeof define&&define.amd?define("signals",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:a.signals=e}(this),function(){var a=function(a){function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function c(a,c){var d=b(a,c);-1!==d&&a.splice(d,1)}function d(a,b){return"[object "+b+"]"===Object.prototype.toString.call(a)}function e(a){return d(a,"RegExp")}function f(a){return d(a,"Array")}function g(a){return"function"==typeof a}function h(a){var b;return b=null===a||"null"===a?null:"true"===a?!0:"false"===a?!1:a===o||"undefined"===a?o:""===a||isNaN(a)?a:parseFloat(a)}function i(a){for(var b=a.length,c=[];b--;)c[b]=h(a[b]);return c}function j(a,b){for(var c,d,e,g,i=(a||"").replace("?","").split("&"),j=-1,k={};d=i[++j];)c=d.indexOf("="),g=d.substring(0,c),e=decodeURIComponent(d.substring(c+1)),b!==!1&&(e=h(e)),g in k?f(k[g])?k[g].push(e):k[g]=[k[g],e]:k[g]=e;return k}function k(){this.bypassed=new a.Signal,this.routed=new a.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function l(b,c,d,f){var g=e(b),h=f.patternLexer;this._router=f,this._pattern=b,this._paramsIds=g?null:h.getParamIds(b),this._optionalParamsIds=g?null:h.getOptionalParamsIds(b),this._matchRegexp=g?b:h.compilePattern(b,f.ignoreCase),this.matched=new a.Signal,this.switched=new a.Signal,c&&this.matched.add(c),this._priority=d||0}var m,n,o;return n=""===/t(.+)?/.exec("t")[1],k.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new k},addRoute:function(a,b,c){var d=new l(a,b,c,this);return this._sortedInsert(d),d},removeRoute:function(a){c(this._routes,a),a._destroy()},removeAllRoutes:function(){for(var a=this.getNumRoutes();a--;)this._routes[a]._destroy();this._routes.length=0},parse:function(a,b){if(a=a||"",b=b||[],this.ignoreState||a!==this._prevMatchedRequest&&a!==this._prevBypassedRequest){var c,d=this._getMatchedRoutes(a),e=0,f=d.length;if(f)for(this._prevMatchedRequest=a,this._notifyPrevRoutes(d,a),this._prevRoutes=d;f>e;)c=d[e],c.route.matched.dispatch.apply(c.route.matched,b.concat(c.params)),c.isFirst=!e,this.routed.dispatch.apply(this.routed,b.concat([a,c])),e+=1;else this._prevBypassedRequest=a,this.bypassed.dispatch.apply(this.bypassed,b.concat([a]));this._pipeParse(a,b)}},_notifyPrevRoutes:function(a,b){for(var c,d=0;c=this._prevRoutes[d++];)c.route.switched&&this._didSwitch(c.route,a)&&c.route.switched.dispatch(b)},_didSwitch:function(a,b){for(var c,d=0;c=b[d++];)if(c.route===a)return!1;return!0},_pipeParse:function(a,b){for(var c,d=0;c=this._piped[d++];)c.parse(a,b)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(a){var b=this._routes,c=b.length;do--c;while(b[c]&&a._priority<=b[c]._priority);b.splice(c+1,0,a)},_getMatchedRoutes:function(a){for(var b,c=[],d=this._routes,e=d.length;(b=d[--e])&&((!c.length||this.greedy||b.greedy)&&b.match(a)&&c.push({route:b,params:b._getParamsArray(a)}),this.greedyEnabled||!c.length););return c},pipe:function(a){this._piped.push(a)},unpipe:function(a){c(this._piped,a)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},m=new k,m.VERSION="0.12.2",m.NORM_AS_ARRAY=function(a,b){return[b.vals_]},m.NORM_AS_OBJECT=function(a,b){return[b]},l.prototype={greedy:!1,rules:void 0,match:function(a){return a=a||"",this._matchRegexp.test(a)&&this._validateParams(a)},_validateParams:function(a){var b,c=this.rules,d=this._getParamsObject(a);for(b in c)if("normalize_"!==b&&c.hasOwnProperty(b)&&!this._isValidParam(a,b,d))return!1;return!0},_isValidParam:function(a,c,d){var h=this.rules[c],i=d[c],j=!1,k=0===c.indexOf("?");return null==i&&this._optionalParamsIds&&-1!==b(this._optionalParamsIds,c)?j=!0:e(h)?(k&&(i=d[c+"_"]),j=h.test(i)):f(h)?(k&&(i=d[c+"_"]),j=this._isValidArrayRule(h,i)):g(h)&&(j=h(i,a,d)),j},_isValidArrayRule:function(a,c){if(!this._router.ignoreCase)return-1!==b(a,c);"string"==typeof c&&(c=c.toLowerCase());for(var d,e,f=a.length;f--;)if(d=a[f],e="string"==typeof d?d.toLowerCase():d,e===c)return!0;return!1},_getParamsObject:function(a){for(var c,d,e=this._router.shouldTypecast,f=this._router.patternLexer.getParamValues(a,this._matchRegexp,e),g={},i=f.length;i--;)d=f[i],this._paramsIds&&(c=this._paramsIds[i],0===c.indexOf("?")&&d&&(g[c+"_"]=d,d=j(d,e),f[i]=d),n&&""===d&&-1!==b(this._optionalParamsIds,c)&&(d=void 0,f[i]=d),g[c]=d),g[i]=d;return g.request_=e?h(a):a,g.vals_=f,g},_getParamsArray:function(a){var b,c=this.rules?this.rules.normalize_:null;return c=c||this._router.normalizeFn,b=c&&g(c)?c(a,this._getParamsObject(a)):this._getParamsObject(a).vals_},interpolate:function(a){var b=this._router.patternLexer.interpolate(this._pattern,a);if(!this._validateParams(b))throw new Error("Generated string doesn't validate against `Route.rules`.");return b},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},k.prototype.patternLexer=function(){function a(){var a,b;for(a in o)o.hasOwnProperty(a)&&(b=o[a],b.id="__CR_"+a+"__",b.save="save"in b?b.save.replace("{{id}}",b.id):b.id,b.rRestore=new RegExp(b.id,"g"))}function b(a,b){var c,d=[];for(a.lastIndex=0;c=a.exec(b);)d.push(c[1]);return d}function c(a){return b(n,a)}function d(a){return b(o.OP.rgx,a)}function e(a,b){return a=a||"",a&&(s===p?a=a.replace(l,""):s===r&&(a=a.replace(m,"")),a=g(a,"rgx","save"),a=a.replace(k,"\\$&"),a=g(a,"rRestore","res"),s===p&&(a="\\/?"+a)),s!==q&&(a+="\\/?"),new RegExp("^"+a+"$",b?"i":"")}function g(a,b,c){var d,e;for(e in o)o.hasOwnProperty(e)&&(d=o[e],a=a.replace(d[b],d[c]));return a}function h(a,b,c){var d=b.exec(a);return d&&(d.shift(),c&&(d=i(d))),d}function j(a,b){if(b=b||{},"string"!=typeof a)throw new Error("Route pattern should be a string.");var c=function(a,c){var d;if(c="?"===c.substr(0,1)?c.substr(1):c,null!=b[c]){if("object"==typeof b[c]){var e,g=[];for(var h in b[c])if(e=b[c][h],f(e))for(var i in e)"[]"==h.slice(-2)?g.push(encodeURI(h.slice(0,-2))+"[]="+encodeURI(e[i])):g.push(encodeURI(h+"="+e[i]));else g.push(encodeURI(h+"="+e));d="?"+g.join("&")}else d=String(b[c]);if(-1===a.indexOf("*")&&-1!==d.indexOf("/"))throw new Error('Invalid value "'+d+'" for segment "'+a+'".')}else{if(-1!==a.indexOf("{"))throw new Error("The segment "+a+" is required.");d=""}return d};return o.OS.trail||(o.OS.trail=new RegExp("(?:"+o.OS.id+")+$")),a.replace(o.OS.rgx,o.OS.save).replace(n,c).replace(o.OS.trail,"").replace(o.OS.rRestore,"/")}var k=/[\\.+*?\^$\[\](){}\/'#]/g,l=/^\/|\/$/g,m=/\/$/g,n=/(?:\{|:)([^}:]+)(?:\}|:)/g,o={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},p=1,q=2,r=3,s=p;return a(),{strict:function(){s=q},loose:function(){s=p},legacy:function(){s=r},getParamIds:c,getOptionalParamsIds:d,getParamValues:h,compilePattern:e,interpolate:j}}(),m};"function"==typeof define&&define.amd?define("crossroads",["signals"],a):"undefined"!=typeof module&&module.exports?module.exports=a(require("signals")):window.crossroads=a(window.signals)}(),function(){var a=function(a){var b=function(b){function c(a){return String(a||"").replace(/\W/g,"\\$&")}function d(a){if(!a)return"";var b=new RegExp("^"+c(n.prependHash)+"|"+c(n.appendHash)+"$","g");return a.replace(b,"")}function e(){var a=w.exec(n.getURL()),b=a&&a[1]||"";try{return n.raw?b:decodeURIComponent(b)}catch(c){return b}}function f(){return r?r.contentWindow.frameHash:null}function g(){r=u.createElement("iframe"),r.src="about:blank",r.style.display="none",u.body.appendChild(r)}function h(){if(r&&o!==f()){var a=r.contentWindow.document;a.open(),a.write("<html><head><title>"+u.title+'</title><script type="text/javascript">var frameHash="'+o+'";</script></head><body>&nbsp;</body></html>'),a.close()}}function i(a,b){if(o!==a){var c=o;o=a,B&&(b?r.contentWindow.frameHash=a:h()),n.changed.dispatch(d(a),d(c))}}function j(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function k(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function l(a){a=Array.prototype.slice.call(arguments);var b=a.join(n.separator);return b=b?n.prependHash+b.replace(y,"")+n.appendHash:b}function m(a){return a=encodeURI(a),z&&C&&(a=a.replace(/\?/,"%3F")),a}var n,o,p,q,r,s,t=25,u=b.document,v=(b.history,a.Signal),w=/#(.*)$/,x=/(\?.*)|(\#.*)/,y=/^\#/,z=!1,A="onhashchange"in b&&7!==u.documentMode,B=z&&!A,C="file:"===location.protocol;return s=B?function(){var a=e(),b=f();b!==o&&b!==a?n.setHash(d(b)):a!==o&&i(a)}:function(){var a=e();a!==o&&i(a)},n={VERSION:"1.2.0",raw:!1,appendHash:"",prependHash:"/",separator:"/",changed:new v,stopped:new v,initialized:new v,init:function(){q||(o=e(),A?j(b,"hashchange",s):(B&&(r||g(),h()),p=setInterval(s,t)),q=!0,n.initialized.dispatch(d(o)))},stop:function(){q&&(A?k(b,"hashchange",s):(clearInterval(p),p=null),q=!1,n.stopped.dispatch(d(o)))},isActive:function(){return q},getURL:function(){return b.location.href},getBaseURL:function(){return n.getURL().replace(x,"")},setHash:function(a){a=l.apply(null,arguments),a!==o&&(i(a),a===o&&(n.raw||(a=m(a)),b.location.hash="#"+a))},replaceHash:function(a){a=l.apply(null,arguments),a!==o&&(i(a,!0),a===o&&(n.raw||(a=m(a)),b.location.replace("#"+a)))},getHash:function(){return d(o)},getHashAsArray:function(){return n.getHash().split(n.separator)},dispose:function(){n.stop(),n.initialized.dispose(),n.stopped.dispose(),n.changed.dispose(),r=n=b.hasher=null},toString:function(){return'[hasher version="'+n.VERSION+'" hash="'+n.getHash()+'"]'}},n.initialized.memorize=!0,n}(window);return b};"function"==typeof define&&define.amd?define("hasher",["signals"],a):"object"==typeof exports?module.exports=a(require("signals")):window.hasher=a(window.signals)}(),define("scalejs.navigation",["scalejs!core","knockout","crossroads","hasher"],function(a,b,c,d){"use strict";function e(a){for(var b={},c=a.substr(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1]||"")}return Object.keys(b).forEach(function(a){"true"===b[a]&&(b[a]=!0),"false"===b[a]&&(b[a]=!1)}),b}function f(a,b,d,f){var g,h,i,j,k;return"function"==typeof b?i=b:(g=b,j=g.split("/")[0],i=function(){c.parse(j)},k=function(a){if(q){if("string"==typeof a){var b=a.split("?");a=b.length>1?{path:b[0],query:e("?"+b[1])}:{path:b[0]||""}}else a=a?{path:"",query:a}:{path:""};d(a),n(h)}},c.addRoute(g,k),g!==j&&c.addRoute(j,k)),h={navText:a,navigate:function(){n(h),i()},sub:n.subscribe(function(a){}),canNav:f||function(){return!0}},m.push(h),o[a]=h,h}function g(a){o[a].sub.dispose(),m.remove(o[a]),delete o[a]}function h(a){n()!==o[a]&&n(o[a])}function i(){0===m().length||n()||m()[0].navigate()}function j(a,b){c.parse(a)}function k(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}function l(a,b,c){c===!1&&(q=!1),b&&(a+="/?"+k(b)),d.setHash(a),q=!0}var m=b.observableArray(),n=b.observable(),o={},p=p,q=!0;return p={navLinks:m,activeLink:n,navigate:h,addNav:f,removeNav:g,init:i,setRoute:l},a.registerExtension({navigation:p,layout:{content:b.observable()}}),c.routed.add(function(a,b){d.setHash(a)}),c.routed.add(function(){window.scrollTo(0,0)}),d.initialized.add(j),d.changed.add(j),a.onApplicationEvent(function(a){"started"===a&&setTimeout(function(){d.init(),p.init()})}),p});